<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f4fdf6;
      color: #2e7d32;
      padding: 2rem;
    }
    h1, h2 {
      text-align: center;
    }
    section {
      max-width: 1000px;
      margin: auto;
      margin-bottom: 2rem;
    }
    .chart-box {
      max-width: 400px;
      margin: auto;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background: #fff;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
      border-radius: 6px;
      overflow: hidden;
    }
    th, td {
      padding: 0.75rem;
      border: 1px solid #ccc;
      text-align: center;
    }
    th {
      background-color: #388e3c;
      color: white;
    }
    .status-start { background: #fff9c4; }
    .status-ontrack { background: #dcedc8; }
    .status-delayed { background: #ffcdd2; }
  </style>
</head>
<body>

<h1>üìä Project Dashboard</h1>

<section class="chart-section">
  <h2>‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô</h2>
  <div class="chart-box">
    <canvas id="tasksChart"></canvas>
  </div>
</section>

<section>
  <h2>üìÖ ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡πÉ‡∏ô‡∏≠‡∏µ‡∏Å 7 ‡∏ß‡∏±‡∏ô</h2>
  <table>
    <thead>
      <tr>
        <th>‡∏ß‡∏±‡∏ô</th>
        <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
        <th>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô</th>
        <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
      </tr>
    </thead>
    <tbody id="upcomingTasksTable"></tbody>
  </table>
</section>

<section>
  <h2>üìã ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏¢‡∏Å‡∏≥‡∏´‡∏ô‡∏î ‡πÅ‡∏•‡∏∞ ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡∏π‡πà</h2>
  <table>
    <thead>
      <tr>
        <th>‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå</th>
        <th>‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</th>
        <th>‡∏ß‡∏±‡∏ô‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î</th>
        <th>% ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</th>
        <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
      </tr>
    </thead>
    <tbody id="overdueTable"></tbody>
  </table>
</section>

<script>
const tasks = [
  {
    project: "‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô",
    startDate: "2025-05-25",
    endDate: "2025-05-30",
    duration: 5,
    progressPercent: 0,
    status: "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô"
  },
  {
    project: "‡∏Ç‡∏≤‡∏¢‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ",
    startDate: "2025-05-27",
    endDate: "2025-05-31",
    duration: 4,
    progressPercent: 100,
    status: "‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î"
  },
  {
    project: "‡∏î‡∏π‡∏ã‡∏µ‡∏£‡∏µ",
    startDate: "2025-05-10",
    endDate: "2025-05-16",
    duration: 6,
    progressPercent: 0,
    status: "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô"
  }
];

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
const summary = tasks.reduce((acc, task) => {
  if (task.status.includes("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°")) acc.notStarted++;
  else if (task.status.includes("‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î")) acc.onTrack++;
  else acc.delayed++;
  return acc;
}, { notStarted: 0, onTrack: 0, delayed: 0 });

new Chart(document.getElementById('tasksChart'), {
  type: 'pie',
  data: {
    labels: ['‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô', '‡πÄ‡∏™‡∏£‡πá‡∏à‡πÑ‡∏°‡πà‡∏ó‡∏±‡∏ô', '‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡∏π‡πà'],
    datasets: [{
      data: [summary.onTrack, summary.delayed, summary.notStarted],
      backgroundColor: ['#66bb6a', '#ef5350', '#ffee58']
    }]
  },
  options: {
    plugins: {
      legend: {
        position: 'bottom',
        labels: {
          color: '#2e7d32',
          font: { size: 14 }
        }
      }
    }
  }
});

// ‡πÅ‡∏™‡∏î‡∏á‡∏á‡∏≤‡∏ô 7 ‡∏ß‡∏±‡∏ô
const upcoming = document.getElementById('upcomingTasksTable');
const overdue = document.getElementById('overdueTable');

tasks.forEach(task => {
  const start = new Date(task.startDate);
  const end = new Date(task.endDate);
  const now = new Date("2025-05-28"); // ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
  const daysLeft = Math.floor((end - now) / (1000 * 60 * 60 * 24));

  if (daysLeft >= 0 && daysLeft <= 7) {
    const tr = document.createElement('tr');
    const statusClass = task.status.includes("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°") ? "status-start" :
                        task.status.includes("‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î") ? "status-ontrack" : "status-delayed";
    tr.className = statusClass;
    tr.innerHTML = `
      <td>${start.toLocaleDateString('th-TH', { weekday: 'short' })}</td>
      <td>${end.toLocaleDateString('th-TH')}</td>
      <td>${task.project}</td>
      <td>${task.status}</td>
    `;
    upcoming.appendChild(tr);
  }

  if (task.status !== "‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô") {
    const tr = document.createElement('tr');
    const statusClass = task.status.includes("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°") ? "status-start" :
                        task.status.includes("‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î") ? "status-ontrack" : "status-delayed";
    tr.className = statusClass;
    tr.innerHTML = `
      <td>${task.project}</td>
      <td>${start.toLocaleDateString('th-TH')}</td>
      <td>${end.toLocaleDateString('th-TH')}</td>
      <td>${task.progressPercent}%</td>
      <td>${task.status}</td>
    `;
    overdue.appendChild(tr);
  }
});
</script>

</body>
</html>
